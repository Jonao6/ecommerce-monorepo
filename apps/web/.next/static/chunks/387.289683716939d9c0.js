"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{2184:(e,t,r)=>{r.d(t,{h:()=>o});let o=Symbol.for("apollo.skipToken")},3387:(e,t,r)=>{r.r(t),r.d(t,{built_for_browser:()=>D,default:()=>O});var o,n,c=r(9086),s=r(1032),l=r(4384),u=r(4815),a=r(3207),i=r(3465),p=r(6812),f=r(2184),h=r(9034),y=r(4070);function d({client:e,query:t,options:r}){return(0,h.k)(()=>{if(r===f.h)return{query:t,fetchPolicy:"standby"};let o=r.fetchPolicy||e.defaultOptions.watchQuery?.fetchPolicy||"cache-first",n={...r,fetchPolicy:o,query:t,notifyOnNetworkStatusChange:!1,nextFetchPolicy:void 0};return p.g&&function(e){var t,r;let{fetchPolicy:o,returnPartialData:n}=e;(function(e="cache-first"){(0,y.V1)(["cache-first","network-only","no-cache","cache-and-network"].includes(e),35,e)})(o),t=o,r=n,"no-cache"===t&&r&&p.g&&y.V1.warn(36)}(n),r.skip&&(n.fetchPolicy="standby"),n},[e,r,t])}function b(e,t){let r=(0,c.m)(t.client),o=(0,u.B)(r),n=d({client:r,query:e,options:t}),{fetchPolicy:i,variables:p}=n,{queryKey:f=[]}=t,h=s.useRef("standby"!==i);h.current||="standby"!==i;let y=[e,(0,l.M)(p),...[].concat(f)],b=o.getQueryRef(y,()=>r.watchQuery(n)),[k,m]=s.useState((0,a.Qh)(b));if((0,a.Fd)(k)!==b&&m((0,a.Qh)(b)),b.didChangeOptions(n)){let e=b.applyOptions(n);(0,a.CY)(k,e)}s.useEffect(()=>{let e=setTimeout(()=>{b.disposed&&o.add(y,b)});return()=>clearTimeout(e)});let v=s.useCallback(e=>{let t=b.fetchMore(e);return m((0,a.Qh)(b)),t},[b]),g=s.useCallback(e=>{let t=b.refetch(e);return m((0,a.Qh)(b)),t},[b]);return s.useEffect(()=>b.softRetain(),[b]),[h.current?k:void 0,{fetchMore:v,refetch:g,subscribeToMore:b.observable.subscribeToMore}]}var k=r(3366),m=r(5190),v=r(1462),g=r(1647);r(8303);var w=r(1171),_=r(6648),C=r(8880),x=Symbol.for("apollo.tee.readableStreamController"),q=Symbol.for("apollo.read.readableStream"),M=class extends k.C{constructor(){super((e,t)=>{let r=e.getContext()[x];if(r){let o=r(),n=()=>{try{o.close()}catch(e){}};return new m.c(r=>{let c=t(e).subscribe({next(e){o.enqueue({type:"next",value:e}),r.next(e)},error(e){o.enqueue({type:"error"}),n(),r.error(e)},complete(){o.enqueue({type:"completed"}),n(),r.complete()}});return()=>{n(),c.unsubscribe()}})}return t(e)})}},S=class extends k.C{constructor(){super((e,t)=>{let r=e.getContext()[q];return r?new m.c(o=>{let n=!1,c=(()=>{try{return r.getReader()}catch(e){}})();if(!c){let r=t(e).subscribe(o);return()=>r.unsubscribe()}l(c);let s=()=>{n=!0,c.cancel()};return()=>s();async function l(r){let c;for(;!n&&!(null==c?void 0:c.done)&&(c=await r.read(),!n);)if(c.value)switch(c.value.type){case"next":o.next(c.value.value);break;case"completed":o.complete();break;case"error":{s();let r=t(e).subscribe(o);s=()=>r.unsubscribe()}}}}):t(e)})}},R={pkg:"@apollo/client-react-streaming"},Q=Symbol.for("apollo.source_package");function F(e){return{...e,query:(0,w.J1)((0,_.y)((0,w.J1)(e.query)))}}(class extends v.D{constructor(e){super(e);let t=this.constructor.info;this[Q]="".concat(t.pkg,":InMemoryCache")}}).info=R,Symbol.for("apollo.hook.wrappers"),(class extends g.R{setLink(e){super.setLink.call(this,k.C.from([new S,new M,e]))}constructor(e){let t=[];"ssrMode"in e&&(delete e.ssrMode,t.push("The `ssrMode` option is not supported in %s. Please remove it from your %s constructor options.")),"ssrForceFetchDelay"in e&&(delete e.ssrForceFetchDelay,t.push("The `ssrForceFetchDelay` option is not supported in %s. Please remove it from your %s constructor options.")),super(e);let r=this.constructor.info;for(let e of(this[Q]="".concat(r.pkg,":ApolloClient"),t))console.warn(e,r.pkg,"ApolloClient");!function(e,t,r){if(e[Q]!=="".concat(t.pkg,":").concat(r))throw Error("When using `".concat(r,"` in streaming SSR, you must use the `").concat(r,'` export provided by `"').concat(t.pkg,'"`.'))}(this.cache,r,"InMemoryCache"),this.setLink(this.link)}}).info=R;var T=Symbol.for("apollo.dataTransport.skip"),P=new WeakMap;function O(e){let{queryRef:t,children:r}=e,o=(0,c.m)(),{$__apollo_queryRef:{options:n,stream:p,queryKey:f}}=t;if(!P.has(t)){let e=F(n),r=[e.query,(0,l.M)(e.variables),f];P.set(t,{cacheKey:r});let c=(0,u.B)(o).getQueryRef(r,()=>{var t;return o.watchQuery({...e,fetchPolicy:"network-only",context:Object.assign((t=p.pipeThrough(new C.Fq),Object.assign({...e.context,queryDeduplication:!0},{[q]:t})),{[T]:!0})})});Object.assign(t,(0,a.Qh)(c))}return!function(e,t){(0,i.Y)("useBackgroundQuery",b,(0,c.m)("object"==typeof t?t.client:void 0))(e,t??{})}(...(0,s.useMemo)(()=>{let{query:e,...r}=F(t.$__apollo_queryRef.options);return[e,{...r,queryKey:t.$__apollo_queryRef.queryKey}]},[t.$__apollo_queryRef])),r}let D=!0},3465:(e,t,r)=>{r.d(t,{Y:()=>s});var o=r(1032);let n=Symbol.for("apollo.hook.wrappers");var c=r(4596);function s(e,t,r){let s=[r.queryManager,e.startsWith("use")?o.useContext((0,c.l)()):void 0],l=t;for(let t of s){let r=t?.[n]?.[e];r&&(l=r(l))}return l}},9034:(e,t,r)=>{r.d(t,{k:()=>c});var o=r(8303),n=r(1032);function c(e,t){let r=n.useRef(void 0);return r.current&&(0,o.L)(r.current.deps,t)||(r.current={value:e(),deps:t}),r.current.value}}}]);